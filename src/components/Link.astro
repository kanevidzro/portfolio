---
import { clsx } from 'clsx'
import type { HTMLAttributes } from 'astro/types'

type Props = HTMLAttributes<'a'>

const { href, class: className, ...props } = Astro.props

// Get current path
const { pathname } = Astro.url

// First segment: "/writings/abc" â†’ "writings"
const firstSegment = pathname.split('/')[1]

// Active if exact match OR if it's the first segment
const isActive =
  href === pathname ||
  href === `/${firstSegment}`
---
<a
  href={href}
  class={clsx(
    'transition-all duration-100 ease-in-out hover:cursor-pointer',
    // Active styles
    isActive
      ? 'text-black dark:text-white font-medium'
      : 'text-gray-400 dark:text-gray-500 font-medium hover:text-black dark:hover:text-white',
    className,
  )}
  {...props}
>
  <slot />
</a>
